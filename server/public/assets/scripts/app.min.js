/*! weekend_challenge_4 2016-03-21 */
function submitTaskButton(a){a.preventDefault();var b=$("#addTask").serializeArray();$.each(b,function(a,b){newTaskObject[b.name]=b.value}),$.ajax({type:"POST",url:"/addTask",data:newTaskObject,success:getAllTasks})}function getAllTasks(){$.ajax({type:"GET",url:"/addAllTasks",success:loadTasks})}function loadTasks(a){$(".container").empty(),$(".container").append("<h2>Current Tasks</h2>");for(var b=0;b<a.length;b++){var c=a[b].id;$(".container").append('<div class="task task'+c+'"></div>');var d=$(".container").children().last();d.append("<p><strong>Task:</strong> "+a[b].task+"</p>"),d.append('<button class="complete id'+c+'"><span>Complete</span></button>'),d.append('<button class="delete id'+c+'">Delete</button>'),$(".id"+c).data("id",c),$(".task"+c).data("completed",a[b].completed),1==a[b].completed&&($(".task"+c).addClass("crossOut"),$(".task"+c+" span").text("Un Check"))}}function completeTask(a){a.preventDefault();var b=$(this).closest(".task").data("completed");1==b?(b=!1,$(this).closest(".task").removeClass("crossOut"),$(this).closest("task").data("completed",b)):0==b&&(b=!0,$(this).closest(".task").addClass("crossOut"),$(this).closest("task").data("completed",b));var c=$(this).data("id"),d={};d.id=c,d.completed=b,$.ajax({type:"PUT",url:"/updateTask",data:d,success:loadTasks})}function deleteTask(a){a.preventDefault();var b=$(this).data("id"),c={};c.id=b,$.ajax({type:"DELETE",url:"/deleteTask",data:c,success:getAllTasks})}var newTaskObject={};$(document).ready(function(){getAllTasks(),$("#addTask").on("submit",submitTaskButton),$(".container").on("click",".complete",completeTask),$(".container").on("click",".delete",deleteTask)});